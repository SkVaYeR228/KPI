# Lab 2
## Use Case Diagram
### Графічний варіант
![ER Чена](1.png)
### Декларативний опис у вигляді коду
```
flowchart TD
    reader["Читач"]
    staff["Персонал"]
    librarian["Бібліотекар"]
    
    paymentSystem["Платіжна система<br/>(система)"]

    UC_Login["Авторизація"]
    UC_Search["Пошук в каталозі"]
    UC_Reserve["Резервування книги"]
    UC_PayFine["Оплата штрафів"]
    UC_ManageUser["Керування акаунтом читача"]
    UC_ProcessReturn["Обробка видачі/повернення"]
    UC_ManageCatalog["Керування каталогом"]
    UC_AddBook["Додати книгу"]
    UC_RemoveBook["Видалити книгу"]
    
    staff --> librarian

    reader --> UC_Search
    reader --> UC_Reserve
    reader --> UC_PayFine
    reader --> UC_Login
    
    staff --> UC_Login
    librarian --> UC_Search
    librarian --> UC_ManageUser
    librarian --> UC_ProcessReturn
    librarian --> UC_ManageCatalog

    UC_PayFine --> paymentSystem
    
    UC_Reserve -.-> UC_Login
    UC_PayFine -.-> UC_Login
    
    UC_ManageCatalog --> UC_AddBook
    UC_ManageCatalog --> UC_RemoveBook
```
## Список вимог
### Functional
| ID | Вимога |
| :---: | :--- |
| **1** | Система повинна дозволяти користувачам (читачам та персоналу) шукати книги в каталозі за назвою, автором або ISBN. |
| **2** | Зареєстровані читачі повинні мати можливість авторизуватися в системі. |
| **3** | Авторизовані читачі повинні мати можливість резервувати книги. |
| **4** | Авторизовані читачі повинні мати можливість оплатити наявні штрафи. |
| **5** | Персонал повинен мати можливість реєструвати нових читачів у системі. |
| **6** | Персонал повинен мати можливість переглядати профіль читача, включно з його історією видач. |
| **7** | Персонал повинен мати можливість оформлювати видачу книг читачеві. |
| **8** | Персонал повинен мати можливість оформлювати повернення книг від читача. |
| **9** | Система повинна автоматично розраховувати штраф, якщо книга повертається із запізненням. |
| **10** | Персонал повинен мати можливість додавати нові примірники книг до каталогу. |
| **11** | Персонал повинен мати можливість видаляти/списувати примірники книг з каталогу. |
### Non Functional
| ID | Вимога |
| :---: | :--- |
| **1** | Сервер повинен стабільно працювати з навантаженням до 1000 одночасних користувачів.
| **2** | Час відповіді системи на пошуковий запит не повинен перевищувати 2 секунди, при нагрузці до 1000 користувачів.
| **3** | Усі фінансові транзакції повинні відбуватися через захищений шлюз (SSL/TLS).
| **4** | Система повинна інтегруватися із зовнішньою платіжною системою для обробки платежів.
## Матриця трасування
| Вимога | Пов'язаний Use Case (UC) | Примітки |
| :--- | :--- | :--- |
| **1** Пошук книги | `UC_Search (Пошук в каталозі)` | **Пряма реалізація.** |
| | `UC_Reserve (Резервування)` | **Вторинний зв'язок:** Пошук є необхідним кроком перед резервуванням. |
| | `UC_ProcessReturn (Обробка)` | **Вторинний зв'язок:** Бібліотекар може шукати книгу під час видачі. |
| **2** Авторизація читача | `UC_Login (Авторизація)` | **Пряма реалізація.** |
| **3** Резервування книги | `UC_Reserve (Резервування)` | **Пряма реалізація.** |
| | `UC_Login (Авторизація)` | **Залежність (<<include>>):** Вимога не може бути виконана без авторизації. |
| | `UC_Search (Пошук в каталозі)` | **Передумова:** Для резервування книгу треба спочатку знайти. |
| **4** Оплата штрафів | `UC_PayFine (Оплата штрафів)` | **Пряма реалізація.** |
| | `UC_Login (Авторизація)` | **Залежність (<<include>>):** Оплата вимагає ідентифікації користувача. |
| | `UC_CalcFine (Нарахування штрафу)`| **Передумова:** Щоб оплатити штраф, його треба спочатку розрахувати. |
| **5** Реєстрація читачів | `UC_ManageUser (Керування акаунтом)` | **Пряма реалізація:** Одна з функцій керування акаунтами. |
| **6** Перегляд профілю/історії | `UC_ManageUser (Керування акаунтом)` | **Пряма реалізація:** Основна функція для персоналу. |
| | `UC_ProcessReturn (Обробка)` | **Вторинний зв'язок:** Бібліотекар переглядає історію читача при видачі/поверненні. |
| **7** Видача книги | `UC_ProcessReturn (Обробка)` | **Пряма реалізація:** Частина UC "Обробка видачі/повернення". |
| | `UC_ManageUser (Керування акаунтом)`| **Передумова:** Потрібно знайти акаунт читача, якому видається книга. |
| **8** Повернення книги | `UC_ProcessReturn (Обробка)` | **Пряма реалізація:** Частина UC "Обробка видачі/повернення". |
| | `UC_CalcFine (Нарахування штрафу)` | **Вторинний зв'язок (<<extend>>):** UC може бути запущений під час повернення. |
| **9** Розрахунок штрафу | `UC_CalcFine (Нарахування штрафу)` | **Пряма реалізація.** |
| | `UC_ProcessReturn (Обробка)` | **Тригер:** Розрахунок запускається при поверненні книги. |
| | `UC_PayFine (Оплата штрафів)` | **Передумова:** Сума штрафу потрібна для відображення перед оплатою. |
| **10** Додавання книг | `UC_AddBook (Додати книгу)` | **Пряма реалізація.** |
| | `UC_ManageCatalog (Керування каталогом)`| **Батьківський UC:** `AddBook` є специфічним видом `ManageCatalog`. |
| | `UC_Search (Пошук в каталозі)` | **Передумова:** Бібліотекар може шукати, чи є вже книга в базі, перед додаванням. |
| **11** Видалення книг | `UC_RemoveBook (Видалити книгу)` | **Пряма реалізація.** |
| | `UC_ManageCatalog (Керування каталогом)`| **Батьківський UC:** `RemoveBook` є специфічним видом `ManageCatalog`. |
| | `UC_Search (Пошук в каталозі)` | **Передумова:** Потрібно знайти книгу в каталозі, щоб її видалити. |
| **(UC без вимоги)** | `UC_ManageCatalog (Керування каталогом)` | **Обґрунтування:** Це абстрактний (базовий) UC. Він не реалізує вимог напряму, а узагальнює `UC_AddBook` та `UC_RemoveBook`, які їх реалізують. |